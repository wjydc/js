/**
 * Created by Adang on 2016/8/10.
 */
!function(a,b){var c={info:{},init:function(a){var c=this,d=c.info;a&&(c.callback=a),d.oldpa=b(".js-old-password"),d.password=b(".js-password-input"),d.save=b("#js-password-save"),d.oldpa.focus().attr("autocomplete","off"),c.bind()},bind:function(){var a=this,b=a.info;b.save.on("click",function(){a.save()})},save:function(){var a=this,c=a.info,d=b.trim(c.password.eq(0).val()),e=b.trim(c.password.eq(1).val()),f=b.trim(c.oldpa.val());return""==f?(c.oldpa.focus(),Toast.show("\u8BF7\u8F93\u5165\u60A8\u7684\u65E7\u5BC6\u7801!")):""==d?(c.password.eq(0).focus(),Toast.show("\u8BF7\u8F93\u5165\u60A8\u7684\u65B0\u5BC6\u7801!")):Matrix.password.init(d)<3?(c.password.eq(0).focus(),Toast.show("\u60A8\u7684\u5BC6\u7801\u5F3A\u5EA6\u4E0D\u591F\uFF0C\u8BF7\u5C3D\u91CF\u5305\u542B\u6570\u5B57\u3001\u5927\u5C0F\u5199\u5B57\u6BCD\u53CA\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA66-16\u4F4D!")):f===d?(c.password.eq(0).focus(),Toast.show("\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E0E\u65E7\u5BC6\u7801\u4E00\u81F4!")):d!==e?(c.password.eq(1).focus(),Toast.show("\u60A8\u7684\u4E24\u6B21\u65B0\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF0C\u8BF7\u68C0\u67E5!")):(Matrix.JSON({showLoad:!0,type:"POST",val:{oldPwd:f,newPwd1:d,newPwd2:e},url:root+"/platform/modifyMyPwd.do",fun:function(d){Toast.show(d.msg),d.success?b.isFunction(a.callback)&&a.callback.call(a.callback,d):(c.oldpa.val(""),c.password.val(""))}}),void 0)}};a.PA=c}(window,jQuery);